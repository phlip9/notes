<!doctype html><html lang=en-US><head><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name=viewport><link href=https://phlip9.com/notes/main.css rel=stylesheet><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>remote attestation | philip's notes</title><meta content="a collection of my notes" name=description><link href="https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/" rel=canonical><meta content=summary name=twitter:card><meta content="remote attestation" name=twitter:title><meta content=@phlip9 name=twitter:site><meta content=@phlip9 name=twitter:creator><meta content="remote attestation" property=og:title><meta content="a collection of my notes" property=og:description><meta content=article property=og:type><meta content="https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/" property=og:url><meta content=2024-10-21T04:08:44.982615 property=og:updated_time><meta content="philip's notes" property=og:site_name><meta content=en_US property=og:locale><script type=application/ld+json>
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "/confidential computing/intel SGX/remote attestation/"
    },
    "headline": "remote attestation",
    "image": ,
    "datePublished": "2022-04-12",
    "dateModified": "2024-10-21",
    "author": {
      "@type": "Person",
      "name": "Philip Hayes"
    },
    "publisher": {
      "@type": "Person",
      "name": "Philip Hayes",
      
    },
    "description": "a collection of my notes"
  }
  </script><script type=application/ld+json>
  {
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    
      
      
        
        
        
        
        
        
        
        
          {
            "@type": "ListItem",
            "position":  1 ,
            "name": "Home",
            "item": "https://phlip9.com/notes/"
          },
          
          
          {
            "@type": "ListItem",
            "position":  2 ,
            "name": "Confidential Computing",
            "item": "https://phlip9.com/notes/confidential computing/"
          },
        
      
        
        
        
        
        
        
        
        
          
          
          {
            "@type": "ListItem",
            "position":  3 ,
            "name": "Intel Sgx",
            "item": "https://phlip9.com/notes/confidential computing/intel SGX/"
          },
        
      
        
        
        
        
        
        
        
        
          
          
          {
            "@type": "ListItem",
            "position":  4 ,
            "name": "Remote Attestation",
            "item": "https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/"
          },
        
      
    
  }
</script><meta content=#383866 name=theme-color><link href=https://phlip9.com/notes/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=https://phlip9.com/notes/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=https://phlip9.com/notes/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=https://phlip9.com/notes/site.webmanifest rel=manifest><script>// https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html
        window.MathJax = {
          tex: {
            inlineMath: [
              ['$', '$']
            ],
            displayMath: [
              ['$$', '$$'],
              ['\\[', '\\]']
            ],
            processEscapes: true,
            processEnvironments: true,
          },
          options: {
            skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
          }
        };</script><script integrity="sha256-z47L98YXVhVIaY0uyDzt675P5Ea+w3RsPh9VD5NuoTY=" async crossorigin=anonymous defer id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-chtml.js></script><body class="notes single dark"><div class=container role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 notes-sidebar"><nav aria-label="Main navigation" class=notes-links><a class="navbar-brand link-internal" href=https://phlip9.com/notes/> philip's notes </a><a class="notes-link sidebar-social" href=https://twitter.com/phlip9> <svg class="feather feather-twitter" viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg> <span class=visually-hidden>Twitter</span> </a><a class="notes-link sidebar-social" href=https://github.com/phlip9> <svg class="feather feather-github" viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg> <span class=visually-hidden>GitHub</span> </a><a class="notes-link sidebar-social" href=# id=sidebar-open-search> <svg aria-labelledby="title desc" viewbox="0 0 19.9 19.7" fill=none height=20 id=search-icon role=img stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 tabindex=0 width=20 xmlns=http://www.w3.org/2000/svg> <g class=search-path><path d="M18.5 18.3l-5.4-5.4"></path><circle cx=8 cy=8 r=7></circle> </g> </svg> </a><hr><ol id=sidebar-tree-root><li><input id=sidebar-input-ai-ml type=checkbox> <label class=h3 for=sidebar-input-ai-ml>AI ML</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/AI ML/Expectimax Search/"> Expectimax Search </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/AI ML/Markov Decision Process (MDP)/"> Markov Decision Process (MDP) </a></ol><li><input id=sidebar-input-wsl type=checkbox> <label class=h3 for=sidebar-input-wsl>WSL</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/WSL/WSL2 custom kernel/"> WSL2 custom kernel </a></ol><li><li><input id=sidebar-input-android type=checkbox> <label class=h3 for=sidebar-input-android>android</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/android/ADB over TCP inside WSL2/"> ADB over TCP inside WSL2 </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/android/OTA updates for rooted android phone/"> OTA updates for rooted android phone </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/android/android cli setup/"> android cli setup </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/android/building signal-android in WSL2/"> building signal-android in WSL2 </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/android/linux ADB udev setup/"> linux ADB udev setup </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/android/root phone with magisk/"> root phone with magisk </a></ol><li><input id=sidebar-input-b-i-g-m-o-n-e-y-l-a-w-r-e-g-u-l-a-t-i-o-n type=checkbox> <label class=h3 for=sidebar-input-b-i-g-m-o-n-e-y-l-a-w-r-e-g-u-l-a-t-i-o-n>b i g m o n e y l a w r e g u l a t i o n</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/b i g m o n e y l a w r e g u l a t i o n/financial instituion/"> financial instituion </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/b i g m o n e y l a w r e g u l a t i o n/foreign bank account report (FBAR)/"> foreign bank account report (FBAR) </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/b i g m o n e y l a w r e g u l a t i o n/monetary instruments/"> monetary instruments </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/b i g m o n e y l a w r e g u l a t i o n/money services business (MSB)/"> money services business (MSB) </a></ol><li><input id=sidebar-input-b-l-o-c-k-c-h-a-i-n type=checkbox> <label class=h3 for=sidebar-input-b-l-o-c-k-c-h-a-i-n>b l o c k c h a i n</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/b l o c k c h a i n/aptos/"> aptos </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/b l o c k c h a i n/bip158 - compact block filters/"> bip158 - compact block filters </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/b l o c k c h a i n/btc utreexo - utxo accumulator/"> btc utreexo - utxo accumulator </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/b l o c k c h a i n/fastpay/"> fastpay </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/b l o c k c h a i n/oasis/"> oasis </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/b l o c k c h a i n/sui/"> sui </a></ol><li><input id=sidebar-input-btc-ln type=checkbox> <label class=h3 for=sidebar-input-btc-ln>btc-ln</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/btc-ln/BOLT 11 - invoices/"> BOLT 11 - invoices </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/btc-ln/BOLT 2 - channel management protocol/"> BOLT 2 - channel management protocol </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/btc-ln/BOLT 4 - onion routing protocol/"> BOLT 4 - onion routing protocol </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/btc-ln/BOLT 7 - p2p node and channel discovery/"> BOLT 7 - p2p node and channel discovery </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/btc-ln/BOLT 8 - secure noise transport/"> BOLT 8 - secure noise transport </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/btc-ln/atomic multipath payments (AMP)/"> atomic multipath payments (AMP) </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/btc-ln/breez lightning service providers/"> breez lightning service providers </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/btc-ln/hosted channels/"> hosted channels </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/btc-ln/lightning libs/"> lightning libs </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/btc-ln/lightning network notes/"> lightning network notes </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/btc-ln/lightning rod/"> lightning rod </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/btc-ln/lightningdevkit - rust-lightning/"> lightningdevkit - rust-lightning </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/btc-ln/submarine swaps/"> submarine swaps </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/btc-ln/zero-conf channels/"> zero-conf channels </a></ol><li><input id=sidebar-input-combinatorics type=checkbox> <label class=h3 for=sidebar-input-combinatorics>combinatorics</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/combinatorics/k-combinations of a multiset/"> k-combinations of a multiset </a></ol><li><input checked id=sidebar-input-confidential-computing type=checkbox> <label class=h3 for=sidebar-input-confidential-computing>confidential computing</label> <ol><li><input checked id=sidebar-input-confidential-computing-intel-sgx type=checkbox> <label class=h3 for=sidebar-input-confidential-computing-intel-sgx>intel SGX</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/confidential computing/intel SGX/SGX lingo/"> SGX lingo </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/confidential computing/intel SGX/overview/"> overview </a><li class=sidebar-note><a class="notes-link link-internal active" href="https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/"> remote attestation </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/confidential computing/intel SGX/sealing/"> sealing </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/confidential computing/intel SGX/secure time/"> secure time </a></ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/confidential computing/enarx (WASM TEE)/"> enarx (WASM TEE) </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/confidential computing/fortanix rust tutorial/"> fortanix rust tutorial </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/confidential computing/gramine/"> gramine </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/confidential computing/intel TDX/"> intel TDX </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/confidential computing/marblerun/"> marblerun </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/confidential computing/mystikos/"> mystikos </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/confidential computing/remote attestation protocols/"> remote attestation protocols </a></ol><li><input id=sidebar-input-crypto type=checkbox> <label class=h3 for=sidebar-input-crypto>crypto</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/crypto/(talk) authenticated data structures for stateless validation/"> (talk) authenticated data structures for stateless validation </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/crypto/TLS self-signed pubkey-only certs/"> TLS self-signed pubkey-only certs </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/crypto/acme protocol/"> acme protocol </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/crypto/biscuit authz/"> biscuit authz </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/crypto/dex - open-source OIDC & OAuth 2.0 provider/"> dex - open-source OIDC & OAuth 2.0 provider </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/crypto/hkdf-sha256/> hkdf-sha256 </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/crypto/smallstep - private online CA & ACME server/"> smallstep - private online CA & ACME server </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/crypto/tls exported keying material/"> tls exported keying material </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/crypto/zkdocs/> zkdocs </a></ol><li><input id=sidebar-input-design type=checkbox> <label class=h3 for=sidebar-input-design>design</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/design/form design/"> form design </a></ol><li><input id=sidebar-input-devops type=checkbox> <label class=h3 for=sidebar-input-devops>devops</label> <ol><li><input id=sidebar-input-devops-o11y type=checkbox> <label class=h3 for=sidebar-input-devops-o11y>o11y</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/devops/o11y/jaeger oss e2e tracing/"> jaeger oss e2e tracing </a></ol><li><input id=sidebar-input-devops-secrets type=checkbox> <label class=h3 for=sidebar-input-devops-secrets>secrets</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/devops/secrets/1password - secrets automation/"> 1password - secrets automation </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/devops/secrets/doppler/> doppler </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/devops/secrets/ejson (Shopify)/"> ejson (Shopify) </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/devops/secrets/ejson-kms (AWS)/"> ejson-kms (AWS) </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/devops/secrets/envkey/> envkey </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/devops/secrets/fortanix DSM/"> fortanix DSM </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/devops/secrets/mozilla SOPS/"> mozilla SOPS </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/devops/secrets/sops-nix/> sops-nix </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/devops/secrets/sy - share secrets safely/"> sy - share secrets safely </a></ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/devops/AKS - azure kubernetes service/"> AKS - azure kubernetes service </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/devops/algo wireguard VPN server/"> algo wireguard VPN server </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/devops/azure CLI/"> azure CLI </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/devops/consul/> consul </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/devops/deployment strategies/"> deployment strategies </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/devops/docker compose/"> docker compose </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/devops/k3s/> k3s </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/devops/kind (kubernetes in docker)/"> kind (kubernetes in docker) </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/devops/kubernetes/> kubernetes </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/devops/linkerd/> linkerd </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/devops/minikube/> minikube </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/devops/nomad/> nomad </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/devops/service mesh/"> service mesh </a></ol><li><input id=sidebar-input-distributed-systems type=checkbox> <label class=h3 for=sidebar-input-distributed-systems>distributed systems</label> <ol><li><input id=sidebar-input-distributed-systems-papers type=checkbox> <label class=h3 for=sidebar-input-distributed-systems-papers>papers</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/distributed systems/papers/(2020) Semi-Fast Byzantine-tolerant Shared Register without Reliable Broadcast/"> (2020) Semi-Fast Byzantine-tolerant Shared Register without Reliable Broadcast </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/distributed systems/papers/(2021) Leaderless Consensus/"> (2021) Leaderless Consensus </a></ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/distributed systems/the siren song of backpressure/"> the siren song of backpressure </a></ol><li><input id=sidebar-input-fuzzing type=checkbox> <label class=h3 for=sidebar-input-fuzzing>fuzzing</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/fuzzing/bolero - fuzzing + property testing/"> bolero - fuzzing + property testing </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/fuzzing/fuzzcheck-rs/> fuzzcheck-rs </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/fuzzing/fuzzing/> fuzzing </a></ol><li><input id=sidebar-input-ios type=checkbox> <label class=h3 for=sidebar-input-ios>ios</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/ios/ios setup/"> ios setup </a></ol><li><input id=sidebar-input-keyboards type=checkbox> <label class=h3 for=sidebar-input-keyboards>keyboards</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/keyboards/moergo glove80/"> moergo glove80 </a></ol><li><input id=sidebar-input-lang type=checkbox> <label class=h3 for=sidebar-input-lang>lang</label> <ol><li><input id=sidebar-input-lang-ats type=checkbox> <label class=h3 for=sidebar-input-lang-ats>ATS</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/lang/ATS/ATS2 Notes/"> ATS2 Notes </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/lang/ATS/Install ATS2/"> Install ATS2 </a></ol><li><input id=sidebar-input-lang-flutter type=checkbox> <label class=h3 for=sidebar-input-lang-flutter>flutter</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/lang/flutter/dart lang/"> dart lang </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/lang/flutter/flutter setup/"> flutter setup </a></ol><li><input id=sidebar-input-lang-rust type=checkbox> <label class=h3 for=sidebar-input-lang-rust>rust</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/lang/rust/optimizing binary size/"> optimizing binary size </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/lang/rust/rr with rust/"> rr with rust </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/lang/rust/rust verification tools/"> rust verification tools </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/lang/rust/rust x SGX/"> rust x SGX </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/lang/rust/self-referencing structs/"> self-referencing structs </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/lang/rust/sycamore x futures/"> sycamore x futures </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/lang/rust/understanding sycamore reactivity/"> understanding sycamore reactivity </a></ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/lang/gdb ref/"> gdb ref </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/lang/koka-lang/> koka-lang </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/lang/lua/> lua </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/lang/operator fixity and precedence/"> operator fixity and precedence </a></ol><li><input id=sidebar-input-management type=checkbox> <label class=h3 for=sidebar-input-management>management</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/management/relieve often - why generals were more successful in WWII/"> relieve often - why generals were more successful in WWII </a></ol><li><input id=sidebar-input-misc type=checkbox> <label class=h3 for=sidebar-input-misc>misc</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/misc/arm target triples/"> arm target triples </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/misc/envsubst/> envsubst </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/misc/git multirepo to monorepo/"> git multirepo to monorepo </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/misc/kintsugi/> kintsugi </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/misc/optimization solvers/"> optimization solvers </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/misc/pop_OS! tweaks/"> pop_OS! tweaks </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/misc/prepping RPI for embedded dev/"> prepping RPI for embedded dev </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/misc/rgbxmas/> rgbxmas </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/misc/scanning QR codes on desktop/"> scanning QR codes on desktop </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/misc/setting up a headless raspbian boot image/"> setting up a headless raspbian boot image </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/misc/uptime to downtime conversion/"> uptime to downtime conversion </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/misc/water distillation setup/"> water distillation setup </a></ol><li><input id=sidebar-input-networking type=checkbox> <label class=h3 for=sidebar-input-networking>networking</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/networking/CIDR/> CIDR </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/networking/ipv6 address space/"> ipv6 address space </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/networking/network interface card (NIC)/"> network interface card (NIC) </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/networking/network interfaces/"> network interfaces </a></ol><li><input id=sidebar-input-nvim type=checkbox> <label class=h3 for=sidebar-input-nvim>nvim</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/nvim/universal-ctags Notes/"> universal-ctags Notes </a></ol><li><input id=sidebar-input-performance type=checkbox> <label class=h3 for=sidebar-input-performance>performance</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/performance/bit hacks/"> bit hacks </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/performance/dtrace on macOS/"> dtrace on macOS </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/performance/profiling/> profiling </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/performance/simdjson talk/"> simdjson talk </a></ol><li><input id=sidebar-input-postgres type=checkbox> <label class=h3 for=sidebar-input-postgres>postgres</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/postgres/postgres performance tuning/"> postgres performance tuning </a><li class=sidebar-note><a class="notes-link link-internal" href=https://phlip9.com/notes/postgres/snippets/> snippets </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/postgres/types of scans/"> types of scans </a></ol><li><input id=sidebar-input-reproducible-builds type=checkbox> <label class=h3 for=sidebar-input-reproducible-builds>reproducible builds</label> <ol><li><input id=sidebar-input-reproducible-builds-nix type=checkbox> <label class=h3 for=sidebar-input-reproducible-builds-nix>nix</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/reproducible builds/nix/links/"> links </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/reproducible builds/nix/nix auto-allocate-uids -> nixbld users/"> nix auto-allocate-uids -> nixbld users </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/reproducible builds/nix/nix debug broken package build/"> nix debug broken package build </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/reproducible builds/nix/nix debug spurrious rebuilds/"> nix debug spurrious rebuilds </a></ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/reproducible builds/earthly/"> earthly </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/reproducible builds/rebuilderd/"> rebuilderd </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/reproducible builds/reproducible-builds.org/"> reproducible-builds.org </a></ol><li><input id=sidebar-input-router type=checkbox> <label class=h3 for=sidebar-input-router>router</label> <ol><li><input id=sidebar-input-router-lightning-router type=checkbox> <label class=h3 for=sidebar-input-router-lightning-router>lightning router</label> <ol><li><input id=sidebar-input-router-lightning-router-captive-portal type=checkbox> <label class=h3 for=sidebar-input-router-lightning-router-captive-portal>captive portal</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/router/lightning router/captive portal/RFC 6585 (Additional HTTP Status Codes)/"> RFC 6585 (Additional HTTP Status Codes) </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/router/lightning router/captive portal/arubanetworks captive portal/"> arubanetworks captive portal </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/router/lightning router/captive portal/captive portal/"> captive portal </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/router/lightning router/captive portal/captive portal (wikipedia)/"> captive portal (wikipedia) </a></ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/router/lightning router/lightning router overview/"> lightning router overview </a></ol></ol><li><input id=sidebar-input-statistics-probability type=checkbox> <label class=h3 for=sidebar-input-statistics-probability>statistics probability</label> <ol><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/statistics probability/CDF confidence bands - DKW inequality/"> CDF confidence bands - DKW inequality </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/statistics probability/G-test - multinomial goodness-of-fit/"> G-test - multinomial goodness-of-fit </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/statistics probability/MAD - median absolute deviation/"> MAD - median absolute deviation </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/statistics probability/cheat sheet/"> cheat sheet </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/statistics probability/herbie - float error fixer/"> herbie - float error fixer </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/statistics probability/kelly criterion + ELO/"> kelly criterion + ELO </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/statistics probability/multinomial distribution/"> multinomial distribution </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/statistics probability/p-value/"> p-value </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/statistics probability/standard error/"> standard error </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/statistics probability/testing whether a coin is fair/"> testing whether a coin is fair </a><li class=sidebar-note><a class="notes-link link-internal" href="https://phlip9.com/notes/statistics probability/winsorize/"> winsorize </a></ol></ol></nav></div><nav aria-label="Secondary navigation" class="notes-toc d-none d-xl-block col-xl-4"><div class=page-links><h3 class=text-muted>on this page</h3><nav id=table-of-contents><ul><li><a href="https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/#remote-attestation" class=link-internal>remote attestation</a> <ul><li><a href="https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/#goals" class=link-internal>Goals</a><li><a href="https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/#remote-attestation-procedure-in-detail" class=link-internal>Remote attestation procedure in detail</a><li><a href="https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/#attestation-key-algorithms" class=link-internal>Attestation Key Algorithms</a><li><a href="https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/#remote-attestation-quote-verification" class=link-internal>Remote Attestation Quote Verification</a><li><a href="https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/#pck-lookup-service" class=link-internal>PCK lookup service</a><li><a href="https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/#get-platform-s-provisioning-certification-key-pck-certs" class=link-internal>GET platform's Provisioning Certification Key (PCK) certs</a><li><a href="https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/#get-current-intel-quoting-enclave-qe-and-quote-verification-enclave-qve-identities" class=link-internal>GET Current Intel Quoting Enclave (QE) and Quote Verification Enclave (QVE) Identities</a> <ul><li><a href="https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/#determining-if-an-sgx-enclave-identity-matches-the-standard-quoting-enclave-identity" class=link-internal>Determining if an SGX Enclave identity matches the standard Quoting Enclave Identity</a></ul><li><a href="https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/#get-tcb-info-for-a-given-cpu-family-platform" class=link-internal>GET TCB info for a given CPU family/platform</a> <ul><li><a href="https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/#determine-the-status-of-a-tcb-level-for-a-platform" class=link-internal>Determine the status of a TCB level for a platform</a></ul><li><a href="https://phlip9.com/notes/confidential computing/intel SGX/remote attestation/#misc" class=link-internal>Misc</a></ul></ul></nav></div></nav><main class="notes-content tags-content col-lg-11 col-xl-8"><h1 id=remote-attestation>remote attestation</h1><p class=text-muted>2022-04-12 Â· 10 min read<ul class=tags><li><a class="btn btn-outline-primary btn-sm link-internal" href=https://phlip9.com/notes/tags/confidential-computing/>#confidential-computing</a><li><a class="btn btn-outline-primary btn-sm link-internal" href=https://phlip9.com/notes/tags/sgx/>#sgx</a></ul><h2 id=goals>Goals <a aria-label="anchor link" class=anchor-link href=#goals> # </a></h2><ol><li>The point of Remote Attestation is to prove to a <em>remote</em> client: <ol><li>Our software is running inside a genuine Intel enclave.<li>The enclave is running a fully up-to-date system at the latest security level.<li>The software itself is running a specific, developer-defined version, called an <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#independent-software-vendor-isv>ISV</a> <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#security-version-number-svn>SVN</a>.<li>The software is signed by a specific authority, called the <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#signer-measurement-mrsigner>Signer Measurement (MRSIGNER)</a>.<li>The software's initial state (code & data) is exactly as we expect, communicated via a cryptographic summary called the <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#enclave-measurement-mrenclave>Enclave Measurement (MRENCLAVE)</a>.<li>(Optional) additional data was present and acknowledged by the enclave when it generated the attestation, called the <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#report-ereport>ReportData</a>. <ul><li>This slot can be used to pass info to the attestation verifier, e.g., enclave application pubkeys, freshness nonces, timestamps.<li>The size is only 64-bytes, so if you have lots of things to attest to, you'll need to attest to a commitment rather than the data itself</ul></ol><li>Once the client decides they can trust the enclave's attestation (according to some configurable policy), they can open a secure channel with the enclave.<li>Over the secure channel, the client can issue commands or provision secrets into the enclave. These secrets remain encryped and unintelligible to the outside, untrusted service provider, machine, and OS.</ol><h2 id=remote-attestation-procedure-in-detail>Remote attestation procedure in detail <a aria-label="anchor link" class=anchor-link href=#remote-attestation-procedure-in-detail> # </a></h2><p><a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#report-ereport>Attesting to another local enclave is easy and efficient.</a><p>Attesting to a remote client requires a few extra steps:<ol><li>The application enclave generates a <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#report-ereport>Report</a>, which includes the various things we want to attest to, described above.<li>Ask the local <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#quoting-enclave-qe>Quoting Enclave (QE)</a> to <em>sign</em> the application enclave's report with its <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#attestation-key-ak>Attestation Key (AK)</a>, usually via the <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#architectural-enclave-service-manager-aesm>Architectural Enclave Service Manager (AESM)</a> API.<li><strong>(Optional)</strong> The application enclave can verify that the <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#quote>Quote</a> was generated by a trusted <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#quoting-enclave-qe>Quoting Enclave (QE)</a> on the local machine. <ul><li>In theory, this step is optional, since the remote attestation verifier <em>should</em> ultimately reject an invalid Quote. However this step can give the enclave itself assurance that it's talking to a legitimate QE.<li>When requesting a Quote, the application enclave can provide a 16-byte nonce to ensure freshness (preventing replay attacks of old quotes).<li>From the AESM or Quoting Library, the application enclave should receive a serialized quote and QE <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#report-ereport>Report</a> from their Quote request.<li>This QE Report is a Report generated by the Quoting Enclave. The application enclave should check that the <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#quoting-enclave-id-qe-id>Quoting Enclave ID</a> in the QE Report is trustworthy.<li>The application should then check that the QE Report's ReportData field contains the value <code>SHA-256(nonce || quote) || [0; 32]</code>.<li>Finally, the application enclave should check that the Quote actually contains its own Report.</ul><li><strong>(EPID-only)</strong> This signed report, called a <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#quote>Quote</a>, is sent to the endorsement service <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#intel-attestation-services-ias>Intel Attestation Services (IAS)</a> who will endorse (read: sign with its cert) the report IFF it believes the Quote is valid. <ul><li>This <em>endorsed</em> Quote is now verifiable by anyone that knows the endorsement service's root CA cert.<li>The remote Intel-run IAS is the only party that can endorse these EPID Quotes. This makes Intel's service an <em>interactive party</em> in our attestation protocol flow when using EPID Quotes.</ul><li><strong>(ECDSA-only)</strong> The report is signed by an ECDSA Attestation Key in a Quoting Enclave. The Attestation Key is endorsed by an Attestation Key Cert from the <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#provisioning-certification-enclave-pce>Provisioning Certification Enclave (PCE)</a>.</ol><h2 id=attestation-key-algorithms>Attestation Key Algorithms <a aria-label="anchor link" class=anchor-link href=#attestation-key-algorithms> # </a></h2><p>There are a two-ish different Attestation Key (TODO link) algorithms that each have different tradeoffs and TCB surface.<ol><li>ECDSA P256 or ECDSA P384 <ol><li>simple, but ids are public and linkable. This is not a problem in data centers or confidential computing scenarios.</ol><li>Intel Enhanced Privacy ID (EPID) <ol><li>complicated, but ids are private and revocations are efficient.<li>significant increased protocol complexity.<li>Intel verifier is all attestations.</ol></ol><p>See: <a href=https://docs.rs/sgx_types/latest/sgx_types/enum.sgx_ql_attestation_algorithm_id_t.html><code>sgx_types::sgx_ql_attestation_algorithm_id_t</code></a><h2 id=remote-attestation-quote-verification>Remote Attestation Quote Verification <a aria-label="anchor link" class=anchor-link href=#remote-attestation-quote-verification> # </a></h2><p>To help visualize how the chain-of-trust extends from our Trust Root (the Intel SGX Root CA) to the enclave's attested values (usually a TLS cert pubkey), I've made this helpful diagram.<p>Quickly recapping, the User starts with three trusted objects:<ol><li>the Intel SGX Root CA<li>the acceptable <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#quoting-enclave-qe>Quoting Enclave</a> identities, retrieved from the <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#intel-attestation-services-ias>IAS</a> (not depicted)<li>the acceptable Application Enclave identities (e.g., <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#signer-measurement-mrsigner>MRSIGNER</a> or <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#enclave-measurement-mrenclave>MRENCLAVE</a>)</ol><p>The Application Enclave usually provides the <a href=https://phlip9.com/notes/confidential%20computing/intel%20SGX/SGX%20lingo/#quote>Quote</a> to the User as part of setting up a secure transport channel. The User wants to verify the Quote to ensure the enclave is running the expected software.<p>This particular diagram shows the ECDSA DCAP-QL Quote structure and how each component commits or signs other sub-components. The flow is somewhat different for EPID-based attestation Quotes.<p><img alt=sgx_remote_attestation.png src=../../../__pub/sgx_remote_attestation.png><h2 id=pck-lookup-service>PCK lookup service <a aria-label="anchor link" class=anchor-link href=#pck-lookup-service> # </a></h2><p><a href=https://github.com/intel/SGXDataCenterAttestationPrimitives/tree/master/QuoteGeneration/pccs>Intel DCAP - Provisioning Certificate Caching Service (PCCS)</a><h2 id=get-platform-s-provisioning-certification-key-pck-certs>GET platform's Provisioning Certification Key (PCK) certs <a aria-label="anchor link" class=anchor-link href=#get-platform-s-provisioning-certification-key-pck-certs> # </a></h2><p>The platform is identified by its encrypted Platform Provisioning ID (PPID) and Provisioning Certification Enclave ID (PCE-ID).<h2 id=get-current-intel-quoting-enclave-qe-and-quote-verification-enclave-qve-identities>GET Current Intel Quoting Enclave (QE) and Quote Verification Enclave (QVE) Identities <a aria-label="anchor link" class=anchor-link href=#get-current-intel-quoting-enclave-qe-and-quote-verification-enclave-qve-identities> # </a></h2><p>Query the Intel Trusted Services API for current valid Quoting Enclave (QE) identity.<pre class=language-bash data-lang=bash style=background-color:#2b303b;color:#c0c5ce;><code class=language-bash data-lang=bash><span style=color:#bf616a;>$</span><span> curl</span><span style=color:#bf616a;> -v -X</span><span> GET "</span><span style=color:#a3be8c;>https://api.trustedservices.intel.com/sgx/certification/v3/qe/identity</span><span>"
</span></code></pre><pre class=language-json data-lang=json style=background-color:#2b303b;color:#c0c5ce;><code class=language-json data-lang=json><span>{
</span><span>  "</span><span style=color:#a3be8c;>enclaveIdentity</span><span>": {
</span><span>    "</span><span style=color:#a3be8c;>id</span><span>": "</span><span style=color:#a3be8c;>QE</span><span>",
</span><span>    "</span><span style=color:#a3be8c;>version</span><span>": </span><span style=color:#d08770;>2</span><span>,
</span><span>    "</span><span style=color:#a3be8c;>issueDate</span><span>": "</span><span style=color:#a3be8c;>2022-04-12T21:57:18Z</span><span>",
</span><span>    "</span><span style=color:#a3be8c;>nextUpdate</span><span>": "</span><span style=color:#a3be8c;>2022-05-12T21:57:18Z</span><span>",
</span><span>    "</span><span style=color:#a3be8c;>tcbEvaluationDataNumber</span><span>": </span><span style=color:#d08770;>12</span><span>,
</span><span>    "</span><span style=color:#a3be8c;>miscselect</span><span>": "</span><span style=color:#a3be8c;>00000000</span><span>",
</span><span>    "</span><span style=color:#a3be8c;>miscselectMask</span><span>": "</span><span style=color:#a3be8c;>FFFFFFFF</span><span>",
</span><span>    "</span><span style=color:#a3be8c;>attributes</span><span>": "</span><span style=color:#a3be8c;>11000000000000000000000000000000</span><span>",
</span><span>    "</span><span style=color:#a3be8c;>attributesMask</span><span>": "</span><span style=color:#a3be8c;>FBFFFFFFFFFFFFFF0000000000000000</span><span>",
</span><span>    "</span><span style=color:#a3be8c;>mrsigner</span><span>": "</span><span style=color:#a3be8c;>8C4F5775D796503E96137F77C68A829A0056AC8DED70140B081B094490C57BFF</span><span>",
</span><span>    "</span><span style=color:#a3be8c;>isvprodid</span><span>": </span><span style=color:#d08770;>1</span><span>,
</span><span>    "</span><span style=color:#a3be8c;>tcbLevels</span><span>": [
</span><span>      {
</span><span>        "</span><span style=color:#a3be8c;>tcb</span><span>": {
</span><span>          "</span><span style=color:#a3be8c;>isvsvn</span><span>": </span><span style=color:#d08770;>6
</span><span>        },
</span><span>        "</span><span style=color:#a3be8c;>tcbDate</span><span>": "</span><span style=color:#a3be8c;>2021-11-10T00:00:00Z</span><span>",
</span><span>        "</span><span style=color:#a3be8c;>tcbStatus</span><span>": "</span><span style=color:#a3be8c;>UpToDate</span><span>"
</span><span>      },
</span><span>      {
</span><span>        "</span><span style=color:#a3be8c;>tcb</span><span>": {
</span><span>          "</span><span style=color:#a3be8c;>isvsvn</span><span>": </span><span style=color:#d08770;>5
</span><span>        },
</span><span>        "</span><span style=color:#a3be8c;>tcbDate</span><span>": "</span><span style=color:#a3be8c;>2020-11-11T00:00:00Z</span><span>",
</span><span>        "</span><span style=color:#a3be8c;>tcbStatus</span><span>": "</span><span style=color:#a3be8c;>OutOfDate</span><span>"
</span><span>      },
</span><span>      {
</span><span>        "</span><span style=color:#a3be8c;>tcb</span><span>": {
</span><span>          "</span><span style=color:#a3be8c;>isvsvn</span><span>": </span><span style=color:#d08770;>4
</span><span>        },
</span><span>        "</span><span style=color:#a3be8c;>tcbDate</span><span>": "</span><span style=color:#a3be8c;>2019-11-13T00:00:00Z</span><span>",
</span><span>        "</span><span style=color:#a3be8c;>tcbStatus</span><span>": "</span><span style=color:#a3be8c;>OutOfDate</span><span>"
</span><span>      },
</span><span>      {
</span><span>        "</span><span style=color:#a3be8c;>tcb</span><span>": {
</span><span>          "</span><span style=color:#a3be8c;>isvsvn</span><span>": </span><span style=color:#d08770;>2
</span><span>        },
</span><span>        "</span><span style=color:#a3be8c;>tcbDate</span><span>": "</span><span style=color:#a3be8c;>2019-05-15T00:00:00Z</span><span>",
</span><span>        "</span><span style=color:#a3be8c;>tcbStatus</span><span>": "</span><span style=color:#a3be8c;>OutOfDate</span><span>"
</span><span>      },
</span><span>      {
</span><span>        "</span><span style=color:#a3be8c;>tcb</span><span>": {
</span><span>          "</span><span style=color:#a3be8c;>isvsvn</span><span>": </span><span style=color:#d08770;>1
</span><span>        },
</span><span>        "</span><span style=color:#a3be8c;>tcbDate</span><span>": "</span><span style=color:#a3be8c;>2018-08-15T00:00:00Z</span><span>",
</span><span>        "</span><span style=color:#a3be8c;>tcbStatus</span><span>": "</span><span style=color:#a3be8c;>OutOfDate</span><span>"
</span><span>      }
</span><span>    ]
</span><span>  },
</span><span>  "</span><span style=color:#a3be8c;>signature</span><span>": "</span><span style=color:#a3be8c;>1750f7e5997a8cb5ba2073f7a4312e43f5771a409e0610b20428dffebe51e53a6eadfb5691045b0819b29754dd6f5cfd20837b0e6f76e2307146dd3deb5203be</span><span>"
</span><span>}
</span></code></pre><p>Likewise, there's a similar endpoint for looking up the Quote Verification Enclave (QVE) identity:<pre class=language-bash data-lang=bash style=background-color:#2b303b;color:#c0c5ce;><code class=language-bash data-lang=bash><span style=color:#bf616a;>$</span><span> curl</span><span style=color:#bf616a;> -v -X</span><span> GET "</span><span style=color:#a3be8c;>https://api.trustedservices.intel.com/sgx/certification/v3/qve/identity</span><span>"
</span></code></pre><p>For both responses, the <code>"signature"</code> field contains a signature over the <code>"enclaveIdentity"</code> body (hex-encoded, no whitespace, very canonical lmao) using the TCB Info Signing Key.<h3 id=determining-if-an-sgx-enclave-identity-matches-the-standard-quoting-enclave-identity>Determining if an SGX Enclave identity matches the standard Quoting Enclave Identity <a aria-label="anchor link" class=anchor-link href=#determining-if-an-sgx-enclave-identity-matches-the-standard-quoting-enclave-identity> # </a></h3><ol><li>Retrieve standard Quoting Enclave Identity from the <a href=https://api.portal.trustedservices.intel.com/documentation#pcs>Intel SGX Provisioning Certification Service (PCS)</a> and verify that it is a valid structure issued by Intel.<li>Perform the following comparison of SGX Enclave Report against the retrieved QE Identity: <ol><li>Verify if MRSIGNER field retrieved from SGX Enclave Report is equal to the value of mrsigner field in QE Identity.<li>Verify if ISVPRODID field retrieved from SGX Enclave Report is equal to the value of isvprodid field in QE Identity.<li>Apply miscselectMask (binary mask) from QE Identity to MISCSELECT field retrieved from SGX Enclave Report. Verify if the outcome (miscselectMask & MISCSELECT) is equal to the value of miscselect field in QE Identity.<li>Apply attributesMask (binary mask) from QE Identity to ATTRIBUTES field retrieved from SGX Enclave Report. Verify if the outcome (attributesMask & ATTRIBUTES) is equal to the value of attributes field in QE Identity.</ol><li>If any of the checks above fail, the identity of the enclave does not match QE Identity published by Intel.<li>Determine a TCB status of the Quoting Enclave: <ol><li>Retrieve a collection of TCB Levels (sorted by ISVSVNs) from tcbLevels field in QE Identity structure.<li>Go over the list of TCB Levels (descending order) and find the one that has ISVSVN that is lower or equal to the ISVSVN value from SGX Enclave Report.<li>If a TCB level is found, read its status from tcbStatus field, otherwise your TCB Level is not supported.</ol></ol><h2 id=get-tcb-info-for-a-given-cpu-family-platform>GET TCB info for a given CPU family/platform <a aria-label="anchor link" class=anchor-link href=#get-tcb-info-for-a-given-cpu-family-platform> # </a></h2><p>The platform is identified by an <code>FMSPC</code> (Family, Model, Stepping, Platform Type, Customized SKU) hex-encoded 6-byte array.<pre class=language-bash data-lang=bash style=background-color:#2b303b;color:#c0c5ce;><code class=language-bash data-lang=bash><span style=color:#bf616a;>curl -v -X</span><span> GET "</span><span style=color:#a3be8c;>https://api.trustedservices.intel.com/sgx/certification/v3/tcb?fmspc={}</span><span>"
</span></code></pre><pre class=language-json data-lang=json style=background-color:#2b303b;color:#c0c5ce;><code class=language-json data-lang=json><span>{
</span><span>   "</span><span style=color:#a3be8c;>tcbInfo</span><span>":{
</span><span>	  "</span><span style=color:#a3be8c;>version</span><span>":</span><span style=color:#d08770;>2</span><span>,
</span><span>	  "</span><span style=color:#a3be8c;>issueDate</span><span>":"</span><span style=color:#a3be8c;>2019-07-30T12:00:00Z</span><span>",
</span><span>	  "</span><span style=color:#a3be8c;>nextUpdate</span><span>":"</span><span style=color:#a3be8c;>2019-08-30T12:00:00Z</span><span>",
</span><span>	  "</span><span style=color:#a3be8c;>fmspc</span><span>":"</span><span style=color:#a3be8c;>000000000000</span><span>",
</span><span>	  "</span><span style=color:#a3be8c;>pceId</span><span>":"</span><span style=color:#a3be8c;>0000</span><span>",
</span><span>	  "</span><span style=color:#a3be8c;>tcbType</span><span>": </span><span style=color:#d08770;>0</span><span>,
</span><span>	  "</span><span style=color:#a3be8c;>tcbEvaluationDataNumber</span><span>": </span><span style=color:#d08770;>2</span><span>,
</span><span>	  "</span><span style=color:#a3be8c;>tcbLevels</span><span>":[
</span><span>		 {
</span><span>			"</span><span style=color:#a3be8c;>tcb</span><span>":{
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp01svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp02svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp03svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp04svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp05svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp06svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp07svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp08svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp09svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp10svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp11svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp12svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp13svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp14svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp15svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>sgxtcbcomp16svn</span><span>":</span><span style=color:#d08770;>0</span><span>,
</span><span>			   "</span><span style=color:#a3be8c;>pcesvn</span><span>":</span><span style=color:#d08770;>0
</span><span>			},
</span><span>			"</span><span style=color:#a3be8c;>tcbDate</span><span>":"</span><span style=color:#a3be8c;>2019-07-11T12:00:00Z</span><span>",
</span><span>			"</span><span style=color:#a3be8c;>tcbStatus</span><span>": "</span><span style=color:#a3be8c;>UpToDate</span><span>",
</span><span>			"</span><span style=color:#a3be8c;>advisoryIDs</span><span>": ["</span><span style=color:#a3be8c;>INTEL-SA-00079</span><span>", "</span><span style=color:#a3be8c;>INTEL-SA-00076</span><span>"]
</span><span>		 }
</span><span>	  ]
</span><span>   },
</span><span>   "</span><span style=color:#a3be8c;>signature</span><span>":"</span><span style=color:#a3be8c;>e45785756a06abfabb2eb6481c3b67c8a0729142e10e06e6415948a88e2f2e773bb2ff9f513ec32e4c5afb15883ab653393f8082f69b69ba19a2a21e3eefee7c</span><span>"
</span><span>}
</span></code></pre><h3 id=determine-the-status-of-a-tcb-level-for-a-platform>Determine the status of a TCB level for a platform <a aria-label="anchor link" class=anchor-link href=#determine-the-status-of-a-tcb-level-for-a-platform> # </a></h3><p>We use this API to verify that a given platform's current TCB is not vulnerable or revoked.<ol><li>Retrieve FMSPC value from SGX PCK Certificate assigned to a given platform.<li>Retrieve TCB Info matching the FMSPC value.<li>Go over the sorted collection of TCB Levels retrieved from TCB Info starting from the first item on the list: <ol><li><strong>Compare all</strong> of the SGX TCB Comp SVNs retrieved from the SGX PCK Certificate (from 01 to 16) with the corresponding values in the TCB Level. If all SGX TCB Comp SVNs in the certificate are greater or equal to the corresponding values in TCB Level, go to <strong>3.b</strong>, otherwise move to the next item on TCB Levels list.<li><strong>Compare PCESVN</strong> value retrieved from the SGX PCK certificate with the corresponding value in the TCB Level. If it is greater or equal to the value in TCB Level, read status assigned to this TCB level. Otherwise, move to the next item on TCB Levels list.</ol><li>If no TCB level matches your SGX PCK Certificate, your TCB Level is not supported.</ol><h2 id=misc>Misc <a aria-label="anchor link" class=anchor-link href=#misc> # </a></h2><p><a href=https://api.portal.trustedservices.intel.com/>Intel SGX Services</a><p><a href=https://api.portal.trustedservices.intel.com/documentation#register-platform>Intel Trusted Services API Developer Dashboard</a><p><a href=https://github.com/scrtlabs/SecretNetwork/tree/master/x/registration/remote_attestation>scrtlabs/SecretNetwork/x/registration/remote_attestation</a><p><a href=https://github.com/scrtlabs/SecretNetwork/tree/613c81534db2211100273963ae1f3ff195c4963e/cosmwasm/enclaves>scrtlabs/SecretNetwork/cosmwasm/enclaves</a></main></div></div></div><form class=d-none id=search-bar><div class=container><div class="row justify-content-center"><div class="col col-lg-11 col-xl-9" id=search-container><input aria-label="Search notes..." class="form-control is-search" placeholder="Search notes..." autocomplete=off id=userinput type=search><div class="shadow rounded" id=suggestions></div></div></div></div></form><script defer src=https://phlip9.com/notes/js/elasticlunr.min.js></script><script defer src=https://phlip9.com/notes/search_index.en.js></script><script defer src=https://phlip9.com/notes/js/search.js></script>